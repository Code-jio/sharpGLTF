# sharpGLTF ä¼˜åŒ–å·¥å…·

## é¡¹ç›®æ¦‚è¿°
åŸºäºå¾®å†…æ ¸æ¶æ„çš„WebGLå¼•æ“ä¼˜åŒ–å¥—ä»¶ï¼Œä¸“æ³¨äºGLTFæ¨¡å‹èµ„äº§çš„è¿è¡Œæ—¶æ€§èƒ½ä¼˜åŒ–ã€‚é€šè¿‡æ¨¡å—åŒ–è®¾è®¡å®ç°ï¼š
- ğŸ—œï¸ å¤šçº§LODæ¨¡å‹å‹ç¼©
- ğŸ–¼ï¸ ASTC/Basisé€šç”¨çº¹ç†ä¼˜åŒ–
- ğŸ–¥ï¸ è·¨å¹³å°æ¸²æŸ“ç®¡çº¿é€‚é…

## åŠŸèƒ½ç‰¹æ€§
### æ ¸å¿ƒæ¨¡å—
| æ¨¡å— | åŠŸèƒ½æè¿° | æŠ€æœ¯æŒ‡æ ‡ |
|------|----------|---------|
| MeshOptimizer | é¡¶ç‚¹/ç´¢å¼•ç¼“å­˜ä¼˜åŒ– | æå‡30%+æ¸²æŸ“æ€§èƒ½ |
| TextureProcessor | æ™ºèƒ½çº¹ç†è½¬ç  | å‡å°‘50%+æ˜¾å­˜å ç”¨ |
| GLTFValidator | èµ„äº§åˆè§„æ€§æ ¡éªŒ | ç¬¦åˆglTF 2.0è§„èŒƒ |

## ç¯å¢ƒè¦æ±‚
```bash
# éªŒè¯Node.jsç‰ˆæœ¬
node -v # è¦æ±‚ â‰¥16.18.1

# å®‰è£…ä¾èµ–
npm install sharp@0.32.6 @gltf-utils/gltf-optimize@2.4.0
```

## ä½¿ç”¨æŒ‡å—
### ç›®å½•ç»“æ„
```
input/
  scene.gltf
  textures/
output/
```

### ä¼˜åŒ–å‚æ•°
```javascript
const optimizer = require('./index.js');

optimizer.run({
  input: "./input",
  output: "./output",
  quality: 3, // 1-5çº§å‹ç¼©
  texture: {
    format: "ktx2",
    quality: 85
  }
});
```

## æ€§èƒ½åŸºå‡†
| æµ‹è¯•åœºæ™¯ | åŸå§‹å¤§å° | ä¼˜åŒ–å | æå‡ç‡ |
|---------|---------|-------|-------|
| å·¥ä¸šå‚æˆ¿ | 218MB | 94MB | 56.8% |
| è§’è‰²åŠ¨ç”» | 157MB | 68MB | 56.7% |

## å‘½ä»¤è¡Œæ¥å£
```
Usage: node main.js [options]

Options:
  -i, --input <path>    æŒ‡å®šè¾“å…¥ç›®å½•ï¼ˆå¿…éœ€ï¼‰
  -o, --output <path>   æŒ‡å®šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼š./outputï¼‰
  -q, --quality <1-5>  è®¾ç½®å‹ç¼©ç­‰çº§ï¼ˆé»˜è®¤ï¼š3ï¼‰
  -f, --format <ktx2/png> çº¹ç†è¾“å‡ºæ ¼å¼ï¼ˆé»˜è®¤ï¼šktx2ï¼‰
```

## ä¼˜åŒ–æµç¨‹å›¾
```mermaid
graph TD
  A[è¾“å…¥GLTF] --> B{æ ¼å¼æ ¡éªŒ}
  B -->|é€šè¿‡| C[é¡¶ç‚¹ç¼“å­˜ä¼˜åŒ–]
  C --> D[ç½‘æ ¼é‡åŒ–]
  D --> E[çº¹ç†è½¬ç ]
  E --> F[ç”ŸæˆæŠ¥å‘Š]
  B -->|å¤±è´¥| G[é”™è¯¯å¤„ç†]
```

> ğŸ“Œ ä½¿ç”¨sharpå¤„ç†å›¾ç‰‡æ—¶è¯·ç¡®ä¿Node.jsç‰ˆæœ¬ä¸º16.18.1
